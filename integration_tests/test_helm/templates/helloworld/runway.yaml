---
# only modules with the tag will included in the test
deployments:
  - modules:
      - path: tfstate.cfn
        tags:
          - app:runway-helm-test
      - path: eks.tf
        tags:
          - app:runway-helm-test
      - path: helloworld.helm
        tags:
          - app:runway-helm-test
    env_vars:
      dev:
        KUBECONFIG: 
          - eks.tf
          - .kube
          - dev
          - config
    environments:
      dev:
        namespace: dev
        region: &devregion us-east-1
        kubectl-access-role-arn: arn:aws:iam::523485371024:role/common-runway-integration-testing-pr-CodeBuildRole-GTQ43SC4OUD7
    module_options:
      terraform_backend_config:
        dev:
          region: *devregion
      terraform_backend_cfn_outputs:
        dev:
          bucket: dev-tf-state::TerraformStateBucketName
          dynamodb_table: dev-tf-state::TerraformStateTableName

    regions:
      - *devregion